1. # <a name="_toc239043656"></a><a name="_toc268791593"></a><a name="_toc269981759"></a><a name="_toc300825211"></a><a name="_toc496253749"></a>**报文说明**

   1. ## <a name="_toc496253750"></a><a name="_toc300825212"></a><a name="_toc239043657"></a>**全局规则说明** 
- 必须严格按照本接口规范来填写报文，包括报文中各个节点的排列顺序。

注意：节点填写的内容不得包含：<> & 等非法字符；

- 银企直联所有非查询类接口均会同时返回STATUS交易处理状态节点与XFERPRCSTS指令处理状态节点，资金管理软件或财务软件需要做以下判断：(STATUS)CODE==0 并且（XFERPRCSTS）XFERPRCCODE为成功状态（参见附录交易指令处理状态） 时交易成功；(STATUS)CODE！=0 或者（XFERPRCSTS）XFERPRCCODE不为成功状态时，交易失败或者状态未知。
- 银企直联每一笔交易对应一个客户端交易流水号TRNUID。需要控制报文中TRNUID的唯一性，包括与转账汇款等其它交易使用的TRNUID不能重复。当使用的TRNUID与之前提交指令TRUNUID（包含所有非查询类接口）相同时，将不执行交易指令，而将之前的交易处理信息作为结果返回给用户，即执行的是查询操作。

当不能确定第一次交易是否成功时，应使用相同的交易流水号，进行指令重发查询交易结果；不要启用一个新的交易流水号，以免生成一笔新的交易指令。

因此，当交易指令没有获得应答或者交易结果未知，需要对指令进行重发时，建议资金管理软件或财务软件设计三种机制进行操作：

1、发起交易后，可以实时等待银行返回报文以获取银行处理结果，也可以设定另外一个定时交易（时间间隔15分钟以上），与银行系统核对交易状态，进行对账。

2、若出现超时等结果未知的异常情况，企业财务软件系统可设置自动重发交易（与原报文时间间隔15分钟以上），将出现异常的交易报文在15分钟以后自动重发（注意：需要财务软件系统进行自动重发，这样才能保证重发的报文与原报文一致，即交易流水号TRNUID一致；若是由业务人员通过财务系统重做一笔，虽然业务要素都一致，但可能是新的TRNUID号，我行系统会认为是两笔不同的指令）。自动重发的报文必须和原报文使用相同的客户端交易流水号TRNUID。若我行已经处理原报文，则银行系统返回原报文的交易状态，以便企业财务系统进行逐笔对账；若我行未处理原报文，则银行系统会自动处理重发的报文，并将处理结果返回给企业财务系统，这样避免企业财务人员重做指令的麻烦。

3、若个别指令出现自动重发报文仍然无法获取银行最终处理结果的情况，可以采用手工对账的方式，致电企业账号的开户行，或致电我行统一客户服务热线95561转4，查询该笔指令的银行最终处理结果后，确定该笔指令的状态和后续处理方式。

- 对于交易类接口，若在代理软件中设置EnableSign=NO，则还需要授权人员/主管在企业网银上进行授权操作；如果设置EnableSign=YES，指令无需授权即可生效。
- 系统自动进行流水同步时，请在非工作时间进行，且不要在凌晨0：00-01:00执行。
0. 随着业务的发展或新的政策法规的出台，输入与输出的非必输/非必回节点可能新增，请在设计中考虑此变化可能带来的影响。
